{%extends "base.html" %}

{% block content %}
<!doctype html>
<script type="text/javascript">
    /* Courtesy of Natasha and Joe */
    $(document).ready(function(){
        $("#instrument").change(function () {
            if (document.getElementById("id_instrument_1").checked){
                $("#miri_filt").show();
                $("#miri_aper").show();
                $("#miri_obsmode").show();
                $("#miri_anomalies").show();
            }
            if (document.getElementById("id_instrument_2").checked){
                $("#nircam_filt").show();
                $("#nircam_aper").show();
                $("#nircam_obsmode").show();
                $("#nircam_anomalies").show();
            }
            if (document.getElementById("id_instrument_3").checked){
                $("#niriss_filt").show();
                $("#niriss_aper").show();
                $("#niriss_obsmode").show();
                $("#niriss_anomalies").show();
            }
            if (document.getElementById("id_instrument_4").checked){
                $("#nirspec_filt").show();
                $("#nirspec_aper").show();
                $("#nirspec_obsmode").show();
                $("#nirspec_anomalies").show();
            }
            if (document.getElementById("id_instrument_1").checked==false){
                $("#miri_filt").hide();
                $("#miri_aper").hide();
                $("#miri_obsmode").hide();
                $("#miri_anomalies").hide();
            }
            if (document.getElementById("id_instrument_2").checked==false){
                $("#nircam_filt").hide();
                $("#nircam_aper").hide();
                $("#nircam_obsmode").hide();
                $("#nircam_anomalies").hide();
            }
            if (document.getElementById("id_instrument_3").checked==false){
                $("#niriss_filt").hide();
                $("#niriss_aper").hide();
                $("#niriss_obsmode").hide();
                $("#niriss_anomalies").hide();
            }
            if (document.getElementById("id_instrument_4").checked==false){
                $("#nirspec_filt").hide();
                $("#nirspec_aper").hide();
                $("#nirspec_obsmode").hide();
                $("#nirspec_anomalies").hide();
            }
        });
    });
</script>

<div class='form-group'>
    <form method="POST" action= "." name="dynamicanomalyform">
        <h1>Dynamic Anomaly Form</h1>
            {{ csrf_input }}
            <p> Use this form to query the archive for anomalies for any instrument or combination of instruments.
                Enter the instruments for which you would like to view the archive and other constraints.
                Feel free to leave fields blank if you do not want to further constrain the database search.
                Note, however, that it may increase the run time if you search a wider array of images.
            </p> 

            <form class='form-horizontal' id='searchform' method='post'>
                <hr class="col-md-12">
                <div class='instrument-form-group'>
                    <div class="col-sm-10">
                    <label for='instrument' class="help-block">The JWST Instrument(s)</label>
                        <div class="form-control" name='instrument' id='instrument'>
                            {% for option in form.instrument %}
                                <div class='radio'>
                                    {{ option }}
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                <hr class="col-md-12">
                <div class='form-group'>
                    <label for='exptime' class="col-sm-2 control-label">Minimum Exposure Time</label>
                    <div class="col-sm-10">
                        <div class="input-group" style='float:left;'>
                            {{ form.exp_time_min }}
                        </div>
                        <br>
                        {% for error in form.exp_time_min.errors %}
                            <p style="color: red;">{{ error }}</p>
                        {% endfor %}
                    </div>
                </div>
                <div class='form-group'>
                    <label for='exptime' class="col-sm-2 control-label">Maximum Exposure Time</label>
                    <div class="col-sm-10">
                        <div class="input-group" style='float:left;'>
                            {{ form.exp_time_max }}
                        </div>
                        <br>
                        {% for error in form.exp_time_max.errors %}
                            <p style="color: red;">{{ error }}</p>
                        {% endfor %}
                    </div>
                </div>
                <hr class="col-md-12">
                <div class="col-sm-10">
                    <div class="form-control" id='miri_aper'>
                    <span id="helpBlock" class="help-block">MIRI Aperture(s)</span>
                        {% for field in form.miri_aper %}
                            <div class="col-sm-10">
                                {{ field }} 
                            </div>
                        {% endfor %}
                        <div class="input-group-addon" style='width:60px'></div>
                    </div>
                    {% for error in form.miri_aper.errors %}
                        <p style="color: red;">{{ error }}</p>
                    {% endfor %}
                </div>
                <div class="col-sm-10">
                    <div class="form-control" id='nircam_aper'>
                    <span id="helpBlock" class="help-block">NIRCam Aperture(s)</span>
                        {% for field in form.nircam_aper %}
                            <div class="col-sm-10">
                                {{ field        }} 
                            </div>
                        {% endfor %}
                        <div class="input-group-addon" style='width:60px'></div>
                    </div>
                    {% for error in form.nircam_aper.errors %}
                        <p style="color: red;">{{ error }}</p>
                    {% endfor %}
                </div>
                <div class="col-sm-10">
                    <div class="form-control" id='niriss_aper'>
                    <span id="helpBlock" class="help-block">NIRISS Aperture(s)</span>
                        {% for field in form.niriss_aper %}
                            <div class="col-sm-10">
                                {{ field        }} 
                            </div>
                        {% endfor %}
                        <div class="input-group-addon" style='width:60px'></div>
                    </div>
                    {% for error in form.niriss_aper.errors %}
                        <p style="color: red;">{{ error }}</p>
                    {% endfor %}
                </div>
                <div class="col-sm-10">
                    <div class="form-control" id='nirspec_aper'>
                    <span id="helpBlock" class="help-block">NIRSpec Aperture(s)</span>
                        {% for field in form.nirspec_aper %}
                            <div class="col-sm-10">
                                {{ field        }} 
                            </div>
                        {% endfor %}
                        <div class="input-group-addon" style='width:60px'></div>
                    </div>
                    {% for error in form.nirspec_aper.errors %}
                        <p style="color: red;">{{ error }}</p>
                    {% endfor %}
                </div>

                <hr class="col-md-12">
                <div class='form-group' id="instrument-mode-section">
                    <div class="col-md-12 dropdown">
                        <div class="btn btn-primary dropdown-toggle" id='miri_filt' type="button" data-toggle="dropdown">
                            {{"Select MIRI filter(s)"}}
                        </div>
                        <div class='dropdown-menu' name="miri_filt" style="color: rgb(255, 117, 6)">
                            <span class="caret"></span>
                            {% for option in form.miri_filt %}
                                <div>
                                    {{ option }}
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="col-md-12 dropdown">
                        <div class="btn btn-primary dropdown-toggle" id='nircam_filt' type="button" data-toggle="dropdown">
                            {{"Select NIRCam filter(s)"}}
                        </div>
                        <div class='dropdown-menu' name="nircam_filt" style="color: rgb(255, 117, 6)">
                            <span class="caret"></span>
                            {% for option in form.nircam_filt %}
                                <div>
                                    {{ option }}
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="col-md-12 dropdown">
                        <div class="btn btn-primary dropdown-toggle" id='niriss_filt' type="button" data-toggle="dropdown">
                            {{"Select NIRISS filter(s)"}}
                        </div>
                        <div class='dropdown-menu' name="niriss_filt" style="color: rgb(255, 117, 6)">
                            <span class="caret"></span>
                            {% for option in form.niriss_filt %}
                                <div>
                                    {{ option }}
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="col-md-12 dropdown">
                        <div class="btn btn-primary dropdown-toggle" id='nirspec_filt' type="button" data-toggle="dropdown">
                            {{"Select NIRSpec filter(s)"}}
                        </div>
                        <div class='dropdown-menu' name="nirspec_filt" style="color: rgb(255, 117, 6)">
                            <span class="caret"></span>
                            {% for option in form.nirspec_filt %}
                                <div>
                                    {{ option }}
                                </div>
                            {% endfor %}
                            </div>
                    </div>
                </div>


                
                <hr class="col-md-12">
                <div class="col-sm-10">
                    <div class="form-control" id='miri_obsmode'>
                    <span id="helpBlock" class="help-block">MIRI Observing Modes</span>
                        {% for field in form.miri_obsmode %}
                            <div class="col-sm-10">
                                {{ field        }} 
                            </div>
                        {% endfor %}
                        <div class="input-group-addon" style='width:60px'></div>
                    </div>
                    <br>
                    {% for error in form.miri_obsmode.errors %}
                        <p style="color: red;">{{ error }}</p>
                    {% endfor %}
                </div>
                <div class="col-sm-10">
                    <div class="form-control" id='nircam_obsmode'>
                    <span id="helpBlock" class="help-block">NIRCam Observing Modes</span>
                        {% for field in form.nircam_obsmode %}
                            <div class="col-sm-10">
                                {{ field }} 
                            </div>
                        {% endfor %}
                        <div class="input-group-addon" style='width:60px'></div>
                    </div>
                    <br>
                    {% for error in form.nircam_obsmode.errors %}
                        <p style="color: red;">{{ error }}</p>
                    {% endfor %}
                </div>
                <div class="col-sm-10">
                    <div class="form-control" id='niriss_obsmode'>
                    <span id="helpBlock" class="help-block">NIRISS Observing Modes</span>
                        {% for field in form.niriss_obsmode %}
                            <div class="col-sm-10">
                                {{ field }} 
                            </div>
                        {% endfor %}
                        <div class="input-group-addon" style='width:60px'></div>
                    </div>   
                    <br>
                    {% for error in form.niriss_obsmode.errors %}
                        <p style="color: red;">{{ error }}</p>
                    {% endfor %}
                </div>
                <div class="col-sm-10">
                    <div class="form-control" id='nirspec_obsmode'>
                    <span id="helpBlock" class="help-block">NIRSpec Observing Modes</span>
                        {% for field in form.nirspec_obsmode %}
                            <div class="col-sm-10">
                                {{ field }} 
                            </div>
                        {% endfor %}
                        <div class="input-group-addon" style='width:60px'></div>
                    </div>
                    <br>
                    {% for error in form.nirspec_obsmode.errors %}
                        <p style="color: red;">{{ error }}</p>
                    {% endfor %}
                </div>






                <hr class="col-md-12">
                <div class="col-sm-10">
                    <div class="form-control" id='miri_anomalies'>
                    <span id="helpBlock" class="help-block">MIRI Anomalies</span>
                        {% for field in form.miri_anomalies %}
                            <div class="col-sm-10">
                                {{ field        }} 
                            </div>
                        {% endfor %}
                        <div class="input-group-addon" style='width:60px'></div>
                    </div>
                    <br>
                    {% for error in form.miri_anomalies.errors %}
                        <p style="color: red;">{{ error }}</p>
                    {% endfor %}
                </div>
                <div class="col-sm-10">
                    <div class="form-control" id='nircam_anomalies'>
                    <span id="helpBlock" class="help-block">NIRCam Anomalies</span>
                        {% for field in form.nircam_anomalies %}
                            <div class="col-sm-10">
                                {{ field }} 
                            </div>
                        {% endfor %}
                        <div class="input-group-addon" style='width:60px'></div>
                    </div>
                    <br>
                    {% for error in form.nircam_anomalies.errors %}
                        <p style="color: red;">{{ error }}</p>
                    {% endfor %}
                </div>
                <div class="col-sm-10">
                    <div class="form-control" id='niriss_anomalies'>
                    <span id="helpBlock" class="help-block">NIRISS Anomalies</span>
                        {% for field in form.niriss_anomalies %}
                            <div class="col-sm-10">
                                {{ field }} 
                            </div>
                        {% endfor %}
                        <div class="input-group-addon" style='width:60px'></div>
                    </div>   
                    <br>
                    {% for error in form.niriss_anomalies.errors %}
                        <p style="color: red;">{{ error }}</p>
                    {% endfor %}
                </div>
                <div class="col-sm-10">
                    <div class="form-control" id='nirspec_anomalies'>
                    <span id="helpBlock" class="help-block">NIRSpec Anomalies</span>
                        {% for field in form.nirspec_anomalies %}
                            <div class="col-sm-10">
                                {{ field }} 
                            </div>
                        {% endfor %}
                        <div class="input-group-addon" style='width:60px'></div>
                    </div>
                    <br>
                    {% for error in form.nirspec_anomalies.errors %}
                        <p style="color: red;">{{ error }}</p>
                    {% endfor %}
                </div>

                <hr class="col-md-12">
                <div class='form-group'>
                    <input type="submit" value="Submit" class="btn btn-primary" name="dynamicanomalyform"/>
                </div>
{% endblock %}