{%extends "base.html" %}

{% block content %}
<!doctype html>
<script type="text/javascript">
    /* Courtesy of Natasha and Joe */
    $(document).ready(function(){
        $("#instrument").change(function () {
            if (document.getElementById("id_instrument_1").checked){
                $("#miri_filt").show();
                $("#miri_aper").show();
                $("#miri_obsmode").show();
                $("#miri_anomalies").show();
            }
            if (document.getElementById("id_instrument_2").checked){
                $("#nircam_filt").show();
                $("#nircam_aper").show();
                $("#nircam_obsmode").show();
                $("#nircam_anomalies").show();
            }
            if (document.getElementById("id_instrument_3").checked){
                $("#niriss_filt").show();
                $("#niriss_aper").show();
                $("#niriss_obsmode").show();
                $("#niriss_anomalies").show();
            }
            if (document.getElementById("id_instrument_4").checked){
                $("#nirspec_filt").show();
                $("#nirspec_aper").show();
                $("#nirspec_obsmode").show();
                $("#nirspec_anomalies").show();
            }
            if (document.getElementById("id_instrument_1").checked==false){
                $("#miri_filt").hide();
                $("#miri_aper").hide();
                $("#miri_obsmode").hide();
                $("#miri_anomalies").hide();
            }
            if (document.getElementById("id_instrument_2").checked==false){
                $("#nircam_filt").hide();
                $("#nircam_aper").hide();
                $("#nircam_obsmode").hide();
                $("#nircam_anomalies").hide();
            }
            if (document.getElementById("id_instrument_3").checked==false){
                $("#niriss_filt").hide();
                $("#niriss_aper").hide();
                $("#niriss_obsmode").hide();
                $("#niriss_anomalies").hide();
            }
            if (document.getElementById("id_instrument_4").checked==false){
                $("#nirspec_filt").hide();
                $("#nirspec_aper").hide();
                $("#nirspec_obsmode").hide();
                $("#nirspec_anomalies").hide();
            }
        });
    });
</script>

<div class='form-group'>
    <form method="POST" action= "." name="dynamicanomalyform">
        <h1>Dynamic Anomaly Form</h1>
            {{ csrf_input }}
            <p> Use this form to query the archive for anomalies for any instrument or combination of instruments.
                Enter the instruments for which you would like to view the archive and other constraints.
                Feel free to leave fields blank if you do not want to further constrain the database search.
                Note, however, that it may increase the run time if you search a wider array of images.
            </p> 

            <form class='form-horizontal' id='searchform' method='post'>
                <hr class="col-md-12">
                <div class='instrument-form-group'>
                    <div class="col-sm-2">
                    <label for='instrument' class="help-block">The JWST Instrument(s)</label>
                        <div class="form-control" name='instrument' id='instrument'>
                            {% for option in form.instrument %}
                                <div class='radio'>
                                    {{ option }}
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                <hr class="col-md-12">
                <div class='form-group' class='row-2' style="float: left">
                    Minimum Exposure Time
                    <div class="input-group">
                        {{ form.exp_time_min }}
                    </div>
                </div>
                <div class='form-group' class='row-4' style="float: left">
                    Maximum Exposure Time
                    <div class="input-group">
                        {{ form.exp_time_max }}
                    </div>
                </div>

                <hr class="col-md-12">
                <br>
                <div style="display: flex">
                    <section class="col-sm-2">
                        <div class="form-control" id='miri_aper'>
                        MIRI Aperture(s)
                            <div>
                            {% for field in form.miri_aper %}
                                    {{ field }} 
                                    {% if (loop.index // 2 == 0) %}
                                        <br>
                                    {% endif %}
                            {% endfor %}
                            </div>
                        </div>
                    </section>
                    <section class="col-sm-2">
                        <div class="form-control" class="row-2" id='nircam_aper'>
                        NIRCam Aperture(s)
                            {% for field in form.nircam_aper %}
                                <div class="row-sm-10">
                                    {{ field        }} 
                                    {% if (loop.index%2 == 0) %}
                                        <br>
                                    {% endif %}
                                </div>
                            {% endfor %}
                            <div class="input-group-addon" style='width:60px'></div>
                        </div>
                    </section>
                    <section class="col-sm-2">
                        <div class="form-control"  class="row-3" id='niriss_aper'>
                        NIRISS Aperture(s)
                            {% for field in form.niriss_aper %}
                                <div class="row-sm-10">
                                    {{ field        }} 
                                    {% if (loop.index // 2 == 0) %}
                                        <br>
                                    {% endif %}
                                </div>
                            {% endfor %}
                            <div class="input-group-addon" style='width:60px'></div>
                        </div>
                    </section>
                    <section class="col-sm-2">
                        <div class="form-control" id='nirspec_aper'>
                        NIRSpec Aperture(s)
                            {% for field in form.nirspec_aper %}
                                    {{ field        }} 
                                    {% if (loop.index // 2 == 0) %}
                                        <br>
                                    {% endif %}
                            {% endfor %}
                            <div class="input-group-addon" style='width:60px'></div>
                        </div>
                    </section>
                </div>

                <hr class="col-md-12">
                
                <div style="display: flex">
                    <section class="col-md-2">
                        <div class="col-md-12 dropdown">
                            <div class="btn btn-primary dropdown-toggle" id='miri_filt' type="button" data-toggle="dropdown">
                                {{" Select MIRI filter(s) "}}
                            </div>
                            <div class='dropdown-menu' name="miri_filt" style="color: rgb(255, 117, 6)">
                                <span class="caret"></span>
                                {% for option in form.miri_filt %}
                                    <div>
                                        {{ option }}
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    </section>
                    <section class="col-sm-2">
                        <div class="col-md-12 dropdown">
                            <div class="btn btn-primary dropdown-toggle" id='nircam_filt' type="button" data-toggle="dropdown">
                                {{"Select NIRCam filter(s)"}}
                            </div>
                            <div class='dropdown-menu' name="nircam_filt" style="color: rgb(255, 117, 6)">
                                <span class="caret"></span>
                                {% for option in form.nircam_filt %}
                                    <div>
                                        {{ option }}
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    </section>
                    <section class="col-sm-2">  
                        <div class="col-md-12 dropdown">
                            <div class="btn btn-primary dropdown-toggle" id='niriss_filt' type="button" data-toggle="dropdown">
                                {{"Select NIRISS filter(s)"}}
                            </div>
                            <div class='dropdown-menu' name="niriss_filt" style="color: rgb(255, 117, 6)">
                                <span class="caret"></span>
                                {% for option in form.niriss_filt %}
                                    <div>
                                        {{ option }}
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    </section>
                    <section class="col-sm-2">
                        <div class="col-md-12 dropdown">
                            <div class="btn btn-primary dropdown-toggle" id='nirspec_filt' type="button" data-toggle="dropdown">
                                {{"Select NIRSpec filter(s)"}}
                            </div>
                            <div class='dropdown-menu' name="nirspec_filt" style="color: rgb(255, 117, 6)">
                                <span class="caret"></span>
                                {% for option in form.nirspec_filt %}
                                    <div>
                                        {{ option }}
                                    </div>
                                {% endfor %}
                                </div>
                        </div>
                    </section>
                </div>
                
                <hr class="col-md-12">

                <div style="display: flex">
                    <section class="col-md-2">
                        <div class="form-control" id='miri_obsmode'>
                        <span id="helpBlock" class="help-block">MIRI Observing Modes</span>
                            {% for field in form.miri_obsmode %}
                                <div class="row-1">
                                    {{ field        }} 
                                </div>
                            {% endfor %}
                            <div class="input-group-addon" style='width:60px'></div>
                        </div>
                    </section>
                    <section class="col-md-2">
                    <div class="form-control" id='nircam_obsmode'>
                    <span id="helpBlock" class="help-block">NIRCam Observing Modes</span>
                        {% for field in form.nircam_obsmode %}
                            <div class="row-4">
                                {{ field }} 
                            </div>
                        {% endfor %}
                        <div class="input-group-addon" style='width:60px'></div>
                    </div>
                    </section>
                    <section class="col-md-2">
                    <div class="form-control" id='niriss_obsmode'>
                    <span id="helpBlock" class="help-block">NIRISS Observing Modes</span>
                        {% for field in form.niriss_obsmode %}
                            <div class="row-sm-10">
                                {{ field }} 
                            </div>
                        {% endfor %}
                        <div class="input-group-addon" style='width:60px'></div>
                    </div>   
                    </section>
                    <section class="col-md-2">
                    <div class="form-control" id='nirspec_obsmode'>
                    <span id="helpBlock" class="help-block">NIRSpec Observing Modes</span>
                        {% for field in form.nirspec_obsmode %}
                            <div class="row-sm-10">
                                {{ field }} 
                            </div>
                        {% endfor %}
                        <div class="input-group-addon" style='width:60px'></div>
                    </div>
                    </section>
                </div>






                <hr class="col-md-12">

                <div style="display: flex">
                    <section class="col-md-2">
                        <div class="form-control" id='miri_anomalies'>
                        <span id="helpBlock" class="help-block">MIRI Anomalies</span>
                            {% for field in form.miri_anomalies %}
                                <div class="row-sm-10">
                                    {{ field }} 
                                </div>
                            {% endfor %}
                            <div class="input-group-addon" style='width:60px'></div>
                        </div>
                    </section>
                    <section class="col-md-2">
                        <div class="form-control" id='nircam_anomalies'>
                        <span id="helpBlock" class="help-block">NIRCam Anomalies</span>
                            {% for field in form.nircam_anomalies %}
                                <div class="row-sm-10">
                                    {{ field }} 
                                </div>
                            {% endfor %}
                            <div class="input-group-addon" style='width:60px'></div>
                        </div>
                    </section>
                    <section class="col-md-2">
                        <div class="form-control" id='niriss_anomalies'>
                        <span id="helpBlock" class="help-block">NIRISS Anomalies</span>
                            {% for field in form.niriss_anomalies %}
                                <div class="row-sm-10">
                                    {{ field }} 
                                </div>
                            {% endfor %}
                            <div class="input-group-addon" style='width:60px'></div>
                        </div>   
                    </section>
                    <section class="col-md-2">
                        <div class="form-control" id='nirspec_anomalies'>
                        <span id="helpBlock" class="help-block">NIRSpec Anomalies</span>
                            {% for field in form.nirspec_anomalies %}
                                <div class="row-sm-10">
                                    {{ field }} 
                                </div>
                            {% endfor %}
                            <div class="input-group-addon" style='width:60px'></div>
                        </div>
                    </section>
                </div>

                <hr class="col-md-12">
                <div class='form-group'>
                    <input type="submit" value="Submit" class="btn btn-primary" name="dynamicanomalyform"/>
                </div>
{% endblock %}