{% extends "base.html" %}

{% block preamble %}

	<title>Explore {{ inst }} Image - JWQL</title>

{% endblock %}

{% block content %}

    <main role="main" class="container">
    	<!-- Show image group name -->
    	<h3> {{ file_root }}</h3>
        <!-- Determine which filetype should be shown on load -->

    	<p>
            <a class="btn btn-primary my-2 mx-2" role="button" href={{ url('jwql:view_image', args=[inst, file_root]) }}>View Image</a>
            <a class="btn btn-primary my-2 mx-2" role="button" href={{ url('jwql:archive_thumb', args=[inst, prop_id]) }}> View Proposal</a>
	    </p>
        

		<div class="row">
            <!-- Display the image -->
    	    <div class="col-xl-9 text-center">
    		    {{ div | safe }}
                {{ script | safe }}
            </div>

            <!-- Display the anomaly form -->
            <div class="col-xl-3 text-left">
                <!--Load the file search form from the view-->
                <div class="anomaly_form">
                    <h5>Submit Anomaly</h5>
                    <form action="" method="post">
                        <!--Show any errors from a previous form submission-->
                        {% if form.errors %}
                            <fieldset>
                                {% for field in form %}
                                    {% for error in field.errors %}
                                        <div class="alert alert-danger">
                                            <strong>{{ error|escape }}</strong>
                                        </div>
                                    {% endfor %}
                                {% endfor %}
                            </fieldset>
                        {% endif %}

                        <!--Django Cross-Site Request Forgery magic-->
                        {{ csrf_input }}

                        <!--Show the field forms-->
                        {% for field in form %}
                            {% for subwidget in field.subwidgets %}
                                <li class="anomaly_choice">{{subwidget}}</li>
                            {% endfor %}
                        {% endfor %}
                        <button class="btn btn-primary" type="submit" style="float: right;">Submit</button>
                    </form>
                </div>
            </div>
            <!-- Display the anomaly form above -->
        </div>

    </main>

{% endblock %}